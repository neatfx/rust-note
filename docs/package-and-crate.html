<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Packages &amp; Crates | Rust 学习笔记</title>
    <meta name="description" content="">
    
    
    <link rel="preload" href="/assets/css/0.styles.8bcf7c97.css" as="style"><link rel="preload" href="/assets/js/app.7819f68a.js" as="script"><link rel="preload" href="/assets/js/2.c7e95d31.js" as="script"><link rel="preload" href="/assets/js/35.c33e3c9f.js" as="script"><link rel="prefetch" href="/assets/js/10.71b7f3db.js"><link rel="prefetch" href="/assets/js/11.33bb0966.js"><link rel="prefetch" href="/assets/js/12.f7bdb846.js"><link rel="prefetch" href="/assets/js/13.14713a71.js"><link rel="prefetch" href="/assets/js/14.7a72f426.js"><link rel="prefetch" href="/assets/js/15.79443f0e.js"><link rel="prefetch" href="/assets/js/16.bfb56dec.js"><link rel="prefetch" href="/assets/js/17.c67e5630.js"><link rel="prefetch" href="/assets/js/18.28df6e14.js"><link rel="prefetch" href="/assets/js/19.6dba0f6e.js"><link rel="prefetch" href="/assets/js/20.7fe96ebb.js"><link rel="prefetch" href="/assets/js/21.c1ca2b28.js"><link rel="prefetch" href="/assets/js/22.8d30fb36.js"><link rel="prefetch" href="/assets/js/23.a04d06e6.js"><link rel="prefetch" href="/assets/js/24.8f9dbc43.js"><link rel="prefetch" href="/assets/js/25.1ab69d7f.js"><link rel="prefetch" href="/assets/js/26.9892c271.js"><link rel="prefetch" href="/assets/js/27.e2eb50d5.js"><link rel="prefetch" href="/assets/js/28.31270cab.js"><link rel="prefetch" href="/assets/js/29.e5fde72d.js"><link rel="prefetch" href="/assets/js/3.065ccf56.js"><link rel="prefetch" href="/assets/js/30.80a32322.js"><link rel="prefetch" href="/assets/js/31.827d06ec.js"><link rel="prefetch" href="/assets/js/32.b74942dc.js"><link rel="prefetch" href="/assets/js/33.db15a8db.js"><link rel="prefetch" href="/assets/js/34.343562c8.js"><link rel="prefetch" href="/assets/js/36.61e40180.js"><link rel="prefetch" href="/assets/js/37.907cc52e.js"><link rel="prefetch" href="/assets/js/38.87af5dd2.js"><link rel="prefetch" href="/assets/js/39.4ee57d9f.js"><link rel="prefetch" href="/assets/js/4.4b7d39e7.js"><link rel="prefetch" href="/assets/js/40.8d7408e4.js"><link rel="prefetch" href="/assets/js/41.c2046a9f.js"><link rel="prefetch" href="/assets/js/42.6cc376da.js"><link rel="prefetch" href="/assets/js/43.63a455c5.js"><link rel="prefetch" href="/assets/js/44.0d15d778.js"><link rel="prefetch" href="/assets/js/45.9be4bc9f.js"><link rel="prefetch" href="/assets/js/46.e22e8db9.js"><link rel="prefetch" href="/assets/js/47.dbd72152.js"><link rel="prefetch" href="/assets/js/48.ec6ca506.js"><link rel="prefetch" href="/assets/js/49.22c5f8ae.js"><link rel="prefetch" href="/assets/js/5.3befbe85.js"><link rel="prefetch" href="/assets/js/50.4a58f660.js"><link rel="prefetch" href="/assets/js/51.36d42e96.js"><link rel="prefetch" href="/assets/js/52.2ec659fc.js"><link rel="prefetch" href="/assets/js/53.541947fb.js"><link rel="prefetch" href="/assets/js/54.1cf56973.js"><link rel="prefetch" href="/assets/js/55.27ed2009.js"><link rel="prefetch" href="/assets/js/56.4011a578.js"><link rel="prefetch" href="/assets/js/57.70babd7b.js"><link rel="prefetch" href="/assets/js/58.39568e0b.js"><link rel="prefetch" href="/assets/js/59.98811df6.js"><link rel="prefetch" href="/assets/js/6.fa4dd12d.js"><link rel="prefetch" href="/assets/js/60.c0a0c3f8.js"><link rel="prefetch" href="/assets/js/61.83913c6f.js"><link rel="prefetch" href="/assets/js/62.0ea87c47.js"><link rel="prefetch" href="/assets/js/7.e902d7c9.js"><link rel="prefetch" href="/assets/js/8.ac97398c.js"><link rel="prefetch" href="/assets/js/9.52c69a98.js">
    <link rel="stylesheet" href="/assets/css/0.styles.8bcf7c97.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-navbar"><!----> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <ul class="sidebar-links"><li><a href="/" class="sidebar-link">Rust Note</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>项目管理</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/cargo.html" class="sidebar-link">开始</a></li><li><a href="/package-and-crate.html" class="active sidebar-link">Packages &amp; Crates</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/package-and-crate.html#概念" class="sidebar-link">概念</a></li><li class="sidebar-sub-header"><a href="/package-and-crate.html#package-的构成规则" class="sidebar-link">Package 的构成规则</a></li><li class="sidebar-sub-header"><a href="/package-and-crate.html#项目示例" class="sidebar-link">项目示例</a></li></ul></li><li><a href="/module.html" class="sidebar-link">Module</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>通用编程概念</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>所有权</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>抽象</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>生命周期</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>并发编程</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>测试</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>模式匹配</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>编程范式</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>高级特性</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="packages-crates"><a href="#packages-crates" class="header-anchor">#</a> Packages &amp; Crates</h1> <h2 id="概念"><a href="#概念" class="header-anchor">#</a> 概念</h2> <h3 id="crate"><a href="#crate" class="header-anchor">#</a> <code>Crate</code></h3> <p>一个模块的树形结构，有二进制、库两种形式，它被编译成库或二进制项目。</p> <h4 id="crate-root"><a href="#crate-root" class="header-anchor">#</a> <code>crate root</code></h4> <p>编译 <code>Crate</code> 时被 Cargo 传递给 <code>rustc</code> 作为根模块的文件（ 例如 <code>src/lib.rs</code>、<code>src/main.rs</code> ）</p> <h3 id="package"><a href="#package" class="header-anchor">#</a> <code>Package</code></h3> <p>由一个或多个 <code>Crate</code> 组成的功能集，包含用于描述如何编译其 <code>Crates</code> 的 <code>Cargo.toml</code> 配置文件</p> <p>Cargo 通过 <code>Package</code> 来构建、测试和分享 <code>Crates</code>。</p> <h2 id="package-的构成规则"><a href="#package-的构成规则" class="header-anchor">#</a> <code>Package</code> 的构成规则</h2> <ul><li><code>Package</code> 可以不包含任何库 <code>Crate</code> 或者仅包含一个库 <code>Crate</code></li> <li><code>Package</code> 可以包含任意数量的二进制 <code>Crate</code></li> <li><code>Package</code> 必须包含至少一个库或二进制 <code>Crate</code></li></ul> <h2 id="项目示例"><a href="#项目示例" class="header-anchor">#</a> 项目示例</h2> <p>运行 <code>cargo new</code> 命令即是在创建一个包：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>cargo new my-project
     Created binary <span class="token punctuation">(</span>application<span class="token punctuation">)</span> <span class="token variable"><span class="token variable">`</span>my-project<span class="token variable">`</span></span> package
<span class="token function">ls</span> my-project
Cargo.toml
src
<span class="token function">ls</span> my-project/src
main.rs
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>注意 <code>Cargo.toml</code> 中并没有提到 <code>src/main.rs</code> 文件，这是因为 Cargo 默认约定：</p> <ul><li>包目录包含 <code>src/main.rs</code>，表示此包带有同名的二进制 <code>Crate</code>，<code>src/main.rs</code> 是 <code>Crate</code> 根</li> <li>包目录包含 <code>src/lib.rs</code>，表示此包带有同名的库 <code>Crate</code>，<code>src/lib.rs</code> 是 <code>Crate</code> 根</li></ul> <p>如果包同时包含 <code>src/main.rs</code> 和 <code>src/lib.rs</code>，那么它带有两个与包同名的 <code>Crate</code> （ 一个二进制和一个库项目 ）。如果只有其中之一，则包将只有一个库或者二进制 <code>Crate</code>。包可以带有多个二进制 <code>Crate</code>，需将其文件置于 <code>src/bin</code> 目录（ 每个文件将成为一个单独的二进制 <code>Crate</code> ）。</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 包 &quot;my-project&quot; 包含 3 个二进制 Crates 、1 个库 Crate</span>
my-project
 ├── Cargo.toml <span class="token comment"># 配置文件</span>
 └── src
     ├── bin
     │   ├── a.rs <span class="token comment"># 单独的二进制 Crate</span>
     │   └── b.rs <span class="token comment"># 单独的二进制 Crate</span>
     ├── lib.rs <span class="token comment"># 库 Crate - “my-project” 的根</span>
     └── main.rs <span class="token comment"># 二进制 Crate - “my-project” 的根</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/cargo.html" class="prev">开始</a></span> <span class="next"><a href="/module.html">Module</a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.7819f68a.js" defer></script><script src="/assets/js/2.c7e95d31.js" defer></script><script src="/assets/js/35.c33e3c9f.js" defer></script>
  </body>
</html>
