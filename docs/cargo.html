<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>开始 | Rust 学习笔记</title>
    <meta name="description" content="">
    
    
    <link rel="preload" href="/assets/css/0.styles.8bcf7c97.css" as="style"><link rel="preload" href="/assets/js/app.7819f68a.js" as="script"><link rel="preload" href="/assets/js/2.c7e95d31.js" as="script"><link rel="preload" href="/assets/js/13.14713a71.js" as="script"><link rel="prefetch" href="/assets/js/10.71b7f3db.js"><link rel="prefetch" href="/assets/js/11.33bb0966.js"><link rel="prefetch" href="/assets/js/12.f7bdb846.js"><link rel="prefetch" href="/assets/js/14.7a72f426.js"><link rel="prefetch" href="/assets/js/15.79443f0e.js"><link rel="prefetch" href="/assets/js/16.bfb56dec.js"><link rel="prefetch" href="/assets/js/17.c67e5630.js"><link rel="prefetch" href="/assets/js/18.28df6e14.js"><link rel="prefetch" href="/assets/js/19.6dba0f6e.js"><link rel="prefetch" href="/assets/js/20.7fe96ebb.js"><link rel="prefetch" href="/assets/js/21.c1ca2b28.js"><link rel="prefetch" href="/assets/js/22.8d30fb36.js"><link rel="prefetch" href="/assets/js/23.a04d06e6.js"><link rel="prefetch" href="/assets/js/24.8f9dbc43.js"><link rel="prefetch" href="/assets/js/25.1ab69d7f.js"><link rel="prefetch" href="/assets/js/26.9892c271.js"><link rel="prefetch" href="/assets/js/27.e2eb50d5.js"><link rel="prefetch" href="/assets/js/28.31270cab.js"><link rel="prefetch" href="/assets/js/29.e5fde72d.js"><link rel="prefetch" href="/assets/js/3.065ccf56.js"><link rel="prefetch" href="/assets/js/30.80a32322.js"><link rel="prefetch" href="/assets/js/31.827d06ec.js"><link rel="prefetch" href="/assets/js/32.b74942dc.js"><link rel="prefetch" href="/assets/js/33.db15a8db.js"><link rel="prefetch" href="/assets/js/34.343562c8.js"><link rel="prefetch" href="/assets/js/35.c33e3c9f.js"><link rel="prefetch" href="/assets/js/36.61e40180.js"><link rel="prefetch" href="/assets/js/37.907cc52e.js"><link rel="prefetch" href="/assets/js/38.87af5dd2.js"><link rel="prefetch" href="/assets/js/39.4ee57d9f.js"><link rel="prefetch" href="/assets/js/4.4b7d39e7.js"><link rel="prefetch" href="/assets/js/40.8d7408e4.js"><link rel="prefetch" href="/assets/js/41.c2046a9f.js"><link rel="prefetch" href="/assets/js/42.6cc376da.js"><link rel="prefetch" href="/assets/js/43.63a455c5.js"><link rel="prefetch" href="/assets/js/44.0d15d778.js"><link rel="prefetch" href="/assets/js/45.9be4bc9f.js"><link rel="prefetch" href="/assets/js/46.e22e8db9.js"><link rel="prefetch" href="/assets/js/47.dbd72152.js"><link rel="prefetch" href="/assets/js/48.ec6ca506.js"><link rel="prefetch" href="/assets/js/49.22c5f8ae.js"><link rel="prefetch" href="/assets/js/5.3befbe85.js"><link rel="prefetch" href="/assets/js/50.4a58f660.js"><link rel="prefetch" href="/assets/js/51.36d42e96.js"><link rel="prefetch" href="/assets/js/52.2ec659fc.js"><link rel="prefetch" href="/assets/js/53.541947fb.js"><link rel="prefetch" href="/assets/js/54.1cf56973.js"><link rel="prefetch" href="/assets/js/55.27ed2009.js"><link rel="prefetch" href="/assets/js/56.4011a578.js"><link rel="prefetch" href="/assets/js/57.70babd7b.js"><link rel="prefetch" href="/assets/js/58.39568e0b.js"><link rel="prefetch" href="/assets/js/59.98811df6.js"><link rel="prefetch" href="/assets/js/6.fa4dd12d.js"><link rel="prefetch" href="/assets/js/60.c0a0c3f8.js"><link rel="prefetch" href="/assets/js/61.83913c6f.js"><link rel="prefetch" href="/assets/js/62.0ea87c47.js"><link rel="prefetch" href="/assets/js/7.e902d7c9.js"><link rel="prefetch" href="/assets/js/8.ac97398c.js"><link rel="prefetch" href="/assets/js/9.52c69a98.js">
    <link rel="stylesheet" href="/assets/css/0.styles.8bcf7c97.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-navbar"><!----> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <ul class="sidebar-links"><li><a href="/" class="sidebar-link">Rust Note</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>项目管理</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/cargo.html" class="active sidebar-link">开始</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/cargo.html#安装" class="sidebar-link">安装</a></li><li class="sidebar-sub-header"><a href="/cargo.html#离线文档" class="sidebar-link">离线文档</a></li><li class="sidebar-sub-header"><a href="/cargo.html#hello-world" class="sidebar-link">Hello World</a></li><li class="sidebar-sub-header"><a href="/cargo.html#项目管理工具" class="sidebar-link">项目管理工具</a></li><li class="sidebar-sub-header"><a href="/cargo.html#自定义构建" class="sidebar-link">自定义构建</a></li><li class="sidebar-sub-header"><a href="/cargo.html#工作区" class="sidebar-link">@ 工作区</a></li></ul></li><li><a href="/package-and-crate.html" class="sidebar-link">Packages &amp; Crates</a></li><li><a href="/module.html" class="sidebar-link">Module</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>通用编程概念</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>所有权</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>抽象</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>生命周期</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>并发编程</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>测试</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>模式匹配</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>编程范式</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>高级特性</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="开始"><a href="#开始" class="header-anchor">#</a> 开始</h1> <h2 id="安装"><a href="#安装" class="header-anchor">#</a> 安装</h2> <p>安装 Rustup 工具：<code>curl https://sh.rustup.rs -sSf | sh</code></p> <p>添加环境变量：<code>source $HOME/.cargo/env</code></p> <p>更新：<code>rustup update</code></p> <h2 id="离线文档"><a href="#离线文档" class="header-anchor">#</a> 离线文档</h2> <p>运行 <code>rustup doc</code> 在浏览器中查看离线文档。</p> <h2 id="hello-world"><a href="#hello-world" class="header-anchor">#</a> Hello World</h2> <div class="language-rust line-numbers-mode"><pre class="language-rust"><code><span class="token comment">//  main.rs</span>
<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">&quot;Hello, world!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-shell line-numbers-mode"><pre class="language-text"><code># 编译
rustc main.rs

# 运行
./main

# 输出
Hello, world!
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>使用 <code>rustc</code> 编译简单程序是没问题的，复杂项目则需要专门工具进行管理。</p> <h2 id="项目管理工具"><a href="#项目管理工具" class="header-anchor">#</a> 项目管理工具</h2> <p>Cargo 是 Rust 的构建系统及包管理器。</p> <h3 id="安装自动格式化工具"><a href="#安装自动格式化工具" class="header-anchor">#</a> 安装自动格式化工具</h3> <div class="language-shell line-numbers-mode"><pre class="language-text"><code># 安装
cargo install rustfmt

# 使用
cargo fmt
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="检查-cargo-是否已安装"><a href="#检查-cargo-是否已安装" class="header-anchor">#</a> 检查 Cargo 是否已安装</h3> <div class="language-shell line-numbers-mode"><pre class="language-text"><code>cargo --version
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="使用-cargo-创建项目"><a href="#使用-cargo-创建项目" class="header-anchor">#</a> 使用 Cargo 创建项目</h3> <div class="language-shell line-numbers-mode"><pre class="language-text"><code>cargo new hello_cargo
cd hello_cargo
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>Cargo 在 <code>hello_cargo</code> 目录下生成两个文件和一个目录：</p> <ul><li><code>Cargo.toml</code>（ Cargo 配置文件 ）</li> <li><code>src/</code> <ul><li><code>main.rs</code></li></ul></li> <li><code>.gitignore</code></li></ul> <h4 id="cargo-toml-文件"><a href="#cargo-toml-文件" class="header-anchor">#</a> <code>Cargo.toml</code> 文件</h4> <div class="language-shell line-numbers-mode"><pre class="language-text"><code>[package]
name = &quot;hello_cargo&quot;
version = &quot;0.1.0&quot;
authors = [&quot;Your Name &lt;you@example.com&gt;&quot;]
edition = &quot;2018&quot;

[dependencies]
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>每个 <code>[xxx]</code> 代表一个配置分段，可以添加多个配置分段。</p> <p><code>[package]</code> 分段用于配置包。这里设置了 Cargo 编译程序所需的项目名称、版本和作者信息。</p> <p><code>[dependencies]</code> 分段配置依赖。代码包被称为 <code>crates</code>。本项目不需要其他的 <code>crate</code>。</p> <p>使用依赖：</p> <div class="language-shell line-numbers-mode"><pre class="language-text"><code>[dependencies]
actix-web = &quot;1.0&quot;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>使用测试版本依赖：</p> <div class="language-shell line-numbers-mode"><pre class="language-text"><code>[dependencies]
actix-web = { git = &quot;https://github.com/actix/actix-web&quot; }
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="src-main-rs"><a href="#src-main-rs" class="header-anchor">#</a> <code>src/main.rs</code></h4> <div class="language-rust line-numbers-mode"><pre class="language-rust"><code><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">&quot;Hello, world!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>Cargo 规定源文件存放在 <code>src</code> 目录中。项目根目录只存放 <code>README</code>、<code>license</code> 信息、配置文件和其他跟代码无关的文件。使用 Cargo 帮助保持项目整洁有序。</p> <h3 id="构建并运行-cargo-项目"><a href="#构建并运行-cargo-项目" class="header-anchor">#</a> 构建并运行 Cargo 项目</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 编译、生成可执行文件（ 输出至 target/debug ）</span>
cargo build

<span class="token comment"># 编译、生成可执行文件（ 输出至 target/debug ）、运行</span>
<span class="token comment"># 如果文件未改动则跳过编译，直接运行</span>
cargo run

<span class="token comment"># 快速验证代码可编译，不生成可执行文件，比 cargo build 快得多</span>
cargo check
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>编写代码时定期运行 <code>cargo check</code> 确保可以编译，当准备好生成可执行文件时运行 <code>cargo build</code>。</p> <h4 id="cargo-lock-文件"><a href="#cargo-lock-文件" class="header-anchor">#</a> <code>Cargo.lock</code> 文件</h4> <p>首次运行 <code>cargo build</code> 时，Cargo 会在项目根目录创建该文件，用于记录项目依赖的实际版本。示例项目没有依赖，所以其内容比较少。不需手工修改此文件，Cargo 会自动处理。</p> <h3 id="发布构建"><a href="#发布构建" class="header-anchor">#</a> 发布构建</h3> <p>当项目最终准备好发布时，可以使用 <code>cargo build --release</code> 来优化编译项目，让 Rust 代码运行得更快，不过启用优化也需要更长的编译时间。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>cargo build --release <span class="token comment"># 最终优化编译（ 输出至 target/release ）</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>这也是为什么会有两种不同的构建配置：</p> <p>一种是为了开发，适用于需要经常快速重新构建的场景；另一种是为用户构建最终程序，构建频次低，并且希望程序运行得越快越好。</p> <p>如果需要测试代码运行时间，请确保运行 <code>cargo build --release</code> 并使用 <code>target/release</code> 下的可执行文件进行测试。</p> <h2 id="自定义构建"><a href="#自定义构建" class="header-anchor">#</a> 自定义构建</h2> <p>配置 <code>Cargo.toml</code> 文件：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>profile.dev<span class="token punctuation">]</span>
opt-level <span class="token operator">=</span> <span class="token number">0</span>

<span class="token punctuation">[</span>profile.release<span class="token punctuation">]</span>
opt-level <span class="token operator">=</span> <span class="token number">3</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="工作区"><a href="#工作区" class="header-anchor">#</a> @ 工作区</h2></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/" class="prev router-link-active">Rust Note</a></span> <span class="next"><a href="/package-and-crate.html">Packages &amp; Crates</a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.7819f68a.js" defer></script><script src="/assets/js/2.c7e95d31.js" defer></script><script src="/assets/js/13.14713a71.js" defer></script>
  </body>
</html>
