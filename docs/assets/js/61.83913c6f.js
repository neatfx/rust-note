(window.webpackJsonp=window.webpackJsonp||[]).push([[61],{251:function(s,t,a){"use strict";a.r(t);var n=a(0),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"变量与可变性"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#变量与可变性"}},[s._v("#")]),s._v(" 变量与可变性")]),s._v(" "),a("h2",{attrs:{id:"变量"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#变量"}},[s._v("#")]),s._v(" 变量")]),s._v(" "),a("h3",{attrs:{id:"不可变变量"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#不可变变量"}},[s._v("#")]),s._v(" 不可变变量")]),s._v(" "),a("p",[s._v("变量默认是不可改变的")]),s._v(" "),a("p",[s._v("不可变意味着当阅读和编写代码时，无需追踪一个值如何及在何处被改变，从而使得代码易于推导")]),s._v(" "),a("div",{staticClass:"language-rust line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-rust"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("fn")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("main")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("let")]),s._v(" x "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  x "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 编译时错误: cannot assign twice to immutable variable x")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("h3",{attrs:{id:"可变变量"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#可变变量"}},[s._v("#")]),s._v(" 可变变量")]),s._v(" "),a("p",[s._v("通过 "),a("code",[s._v("mut")]),s._v(" 使默认不可改变的变量可变")]),s._v(" "),a("div",{staticClass:"language-rust line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-rust"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("fn")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("main")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("let")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("mut")]),s._v(" y "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  y "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 编译通过")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("h2",{attrs:{id:"可变性取舍"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#可变性取舍"}},[s._v("#")]),s._v(" 可变性取舍")]),s._v(" "),a("ul",[a("li",[s._v("使用大型数据结构时，适当地使用可变变量，可能比复制和返回新分配的实例更快。")]),s._v(" "),a("li",[s._v("对于较小的数据结构，总是创建新实例，采用更偏向函数式的编程风格（ 不可变变量 ），牺牲一些性能换取更好的代码可读性可能是值得的。")])]),s._v(" "),a("h2",{attrs:{id:"变量与常量的区别"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#变量与常量的区别"}},[s._v("#")]),s._v(" 变量与常量的区别")]),s._v(" "),a("ul",[a("li",[s._v("常量始终是不可变的，不允许对常量使用 "),a("code",[s._v("mut")])]),s._v(" "),a("li",[s._v("常量使用 "),a("code",[s._v("const")]),s._v(" 关键字声明，并且必须标注值的类型")]),s._v(" "),a("li",[s._v("常量可以在任何作用域中声明，包括全局作用域")]),s._v(" "),a("li",[s._v("常量只能被设置为常量表达式，而不能是函数调用的结果，或任何其他只能在运行时计算出的值")])]),s._v(" "),a("p",[s._v("将程序中的硬编码值声明为常量，利于后来的代码维护人员了解值的含义（ 有意义的常量命名 ），并且如果将来需要修改硬编码值，也只需修改一处常量值。")]),s._v(" "),a("h2",{attrs:{id:"遮蔽"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#遮蔽"}},[s._v("#")]),s._v(" 遮蔽")]),s._v(" "),a("p",[s._v("定义一个与之前变量同名的新变量，新变量会遮蔽（ Shadowing ）之前的变量，可重复使用 "),a("code",[s._v("let")]),s._v(" 关键字进行多次遮蔽")]),s._v(" "),a("div",{staticClass:"language-rust line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-rust"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("let")]),s._v(" x "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("let")]),s._v(" x "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" x "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("let")]),s._v(" x "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" x "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 12")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("h3",{attrs:{id:"shadowing-与-mut-的区别"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#shadowing-与-mut-的区别"}},[s._v("#")]),s._v(" "),a("code",[s._v("Shadowing")]),s._v(" 与 "),a("code",[s._v("mut")]),s._v(" 的区别")]),s._v(" "),a("ul",[a("li",[s._v("不使用 let 关键字对变量重新赋值将得到编译时错误")]),s._v(" "),a("li",[s._v("变量类型是否可变")])]),s._v(" "),a("h4",{attrs:{id:"shadowing-变量类型可变"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#shadowing-变量类型可变"}},[s._v("#")]),s._v(" "),a("code",[s._v("Shadowing")]),s._v(" - 变量类型可变")]),s._v(" "),a("div",{staticClass:"language-rust line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-rust"}},[a("code",[s._v("  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("let")]),s._v(" spaces "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"   "')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 字符串类型")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("let")]),s._v(" spaces "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" spaces"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("len")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 数字类型")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h4",{attrs:{id:"mut-变量类型不可变"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mut-变量类型不可变"}},[s._v("#")]),s._v(" "),a("code",[s._v("mut")]),s._v(" - 变量类型不可变")]),s._v(" "),a("div",{staticClass:"language-rust line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-rust"}},[a("code",[s._v("  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("let")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("mut")]),s._v(" spaces "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"   "')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 编译时错误: mismatched types")]),s._v("\n  spaces "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" spaces"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("len")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// expected &str, found usize")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])])])}),[],!1,null,null,null);t.default=e.exports}}]);